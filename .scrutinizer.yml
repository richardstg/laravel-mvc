imports:
  - php

filter:
  excluded_paths: [vendor/*, tests/*]

build:
  environment:
    variables:
      # DB_DATABASE: "database.sqlite"

  dependencies:
    before:
      - touch database/database.sqlite
    after:
      - php artisan migrate

  nodes:
    analysis:
      tests:
        override:
          - php-scrutinizer-run

    tests-and-coverage:
      tests:
        override:
          - command: "make phpunit"
            coverage:
              file: "build/coverage.clover"
              format: "php-clover"
